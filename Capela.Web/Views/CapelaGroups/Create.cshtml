@model Capela.Web.Entities.CapelaGroup

@using (Html.BeginForm("Create", "CapelaGroups", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
    @Html.AntiForgeryToken()

<div class="container-fluid header-photo">
    <h1>Criando Nova Pastoral</h1>
</div>

<div class="container">
    <div class="form-horizontal">
        <br />
        <h4>Nova - Pastoral</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextAreaFor(model => model.Title, 6, 120, htmlAttributes: new { @class = "form-control text-box" })
                @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Text, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <textarea id="Text" name="Text"></textarea>
                @Html.ValidationMessageFor(model => model.Text, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Photo, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <label>
                    <label id="filename">

                    </label>
                    <label class="btn btn-helper" for="my-file-selector">
                        <input id="my-file-selector" type="file" style="display:none;" name="image">
                        Procurar
                    </label>
                    @if (ViewBag.PhotoWarning) {
                        <br/>
                        <span class="text-danger field-validation-error" data-valmsg-replace="true" data-valmsg-for="file"><span>A foto selecionada é inválida.</span></span>
                    }
                </label>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Criar Nova Pastoral" class="btn btn-primary btn-big" id="create"/>
            </div>
        </div>
    </div>
    

    <div>
        @Html.ActionLink("Cancelar e voltar para Pastorais", "Index")
    </div>
    <br />

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
        @Scripts.Render("~/bundles/bootstrap")
        <script src="~/Scripts/ckeditor/ckeditor.js"></script>
        <script src="~/Scripts/ckeditor/adapters/jquery.js"></script>

        <script>
            $(document).ready(function () {
                $('#my-file-selector').change(function () {
                    var str = $('#my-file-selector').val();
                    var pieces = str.split(/[\s,]+/);
                    $("#filename").empty();
                    $("#filename").text(pieces[pieces.length -1]);
                });
            });
        </script>

        @*<script type="text/javascript">
            CKEDITOR_BASEPATH = "@Url.Content("~/Scripts/ckeditor/")";
        </script>*@

        <script>
            $(function () {
                $('#Text').ckeditor();
            });
        </script>

    }

    
</div>





}